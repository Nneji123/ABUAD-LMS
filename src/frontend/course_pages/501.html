<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>neural network</title>

  </head>
  <body>

    <style>

    *{
      padding: 5px 0px 0px 5px;
    }

    body{
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      display: grid;
      grid-template-columns: 30% auto;

    }
    ul{
      text-decoration: none;
      list-style: none;
      padding: 5px;
      margin: 5px;
    } 
    li:hover{
      color: red;
      cursor:cell
    }

    #box{
      display: none;
      width: 500px;
      height: 500px;
      background-color: black;
    }

    a{
      text-decoration: none;
      font-size: large;
      font-weight: 200;
    }

    a:hover{
      background-color: rgb(194, 171, 214);
      padding: 8px;
      border-radius: 10px;
    }

    .func2{
      border: 1px solid rgba(0,0,1,0.2);
      height: 100vh;
    }
  </style>
    <div class="func1">

      <div>
        <p><a href="/501/documents" id="doc1">Documents</a></p>

        <ul>
          {% for file in files %}
          <li>{{ file }}</li>
          {% endfor %}
        </ul>

      </div>

      <div>
        <p><a href="/501/videos" id="vid1">Videos</a></p>

        <ul>
          {% for video in videos %}
          <li><a href="#" data-video="{{ video }}">{{ video }}</a></li>
          {% endfor %}
        </ul>

      </div>

      <div>
        <p><a href="/attendance/501/{{current_user.username}}" id="att1">Attendance
            Record</a></p>
        <title>Attendance for {{ student }} in {{ course }}</title>
        <h1>Attendance for {{ student }} in {{ course }}</h1>
        <p>{{ attendance }}</p>

      </div>

    </div>

    <div class="func2">
      <video id="player" controls></video>
    </div>



    <script>
  const links = document.querySelectorAll('a[data-video]');
  const player = document.getElementById('player');

  links.forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const videoName = link.getAttribute('data-video');
      player.setAttribute('src', `/static/courses/501/video/${videoName}`);
    });
  });

  const toggleBox = () => {
    const box = document.getElementById('box');
    box.style.display === 'none' ? box.style.display = 'block' : box.style.display = 'none';
  }

  const doc1 = document.getElementById('doc1');
  doc1.addEventListener('click', () => {
    const box = document.getElementById('box');
    const func2 = document.querySelector('.func2');
    func2.innerHTML = '';
    fetch('/501/documents')
      .then(response => response.json())
      .then(data => {
        const ul = document.createElement('ul');
        data.forEach(file => {
          const li = document.createElement('li');
          li.textContent = file;
          ul.appendChild(li);
        });
        func2.appendChild(ul);
      })
      .then(() => {
        toggleBox();
      });
  });

  const att1 = document.getElementById('att1');
  att1.addEventListener('click', () => {
    const box = document.getElementById('box');
    const func2 = document.querySelector('.func2');
    func2.innerHTML = '';
    fetch('/attendance/501')
      .then(response => response.json())
      .then(data => {
        const ul = document.createElement('ul');
        data.forEach(record => {
          const li = document.createElement('li');
          li.textContent = record;
          ul.appendChild(li);
        });
        func2.appendChild(ul);
      })
      .then(() => {
        toggleBox();
      });
  });
</script>
